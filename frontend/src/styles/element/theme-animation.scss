:root {
  --transition-animation-old: reveal-out;
  --transition-animation-new: reveal-in;
}
::view-transition {
  background: #555;
}
::view-transition-image-pair(root) {
  perspective: 2500px;
  perspective-origin: center;
  transform-style: preserve-3d;
  transform-origin: 50% 50% 100vw;
  filter: drop-shadow(0px 0px 6px hsl(165deg 11% 3%))
    drop-shadow(0px 0px 25px hsl(165deg 11% 3%/50%));
}
::view-transition-old(root),
::view-transition-new(root) {
  animation: 1.5s var(--page-ease);
  transform-style: preserve-3d;
  transform-origin: 50% 50% 0;
  /*   perspective: 800px; */
  transform: translateZ(-50vw) scale(var(--scale)) rotatey(var(--rotation)) translatez(50vw);
  backface-visibility: hidden;
}
::view-transition-old(root) {
  animation-name: var(--transition-animation-old);
}
::view-transition-new(root) {
  animation-name: var(--transition-animation-new);
}

@property --rotation {
  syntax: '<angle>';
  inherits: false;
  initial-value: 0deg;
}
@property --scale {
  syntax: '<number>';
  inherits: false;
  initial-value: 1;
}

@property --page-ease {
  syntax: '<easing-function>'; /* 变量类型：曲线函数 */
  inherits: false; /* 不继承父元素值 */
  initial-value: linear(
    0,
    0.324 9.1%,
    0.584 18.6%,
    0.782 28.6%,
    0.858 33.8%,
    0.92 39.2%,
    0.997 49.5%,
    1.021 55.1%,
    1.033 61%,
    1.035 71.7%,
    1
  );
}

@keyframes reveal-in {
  from {
    --rotation: -90deg;
    animation-timing-function: ease-in-out;
  }
  15% {
    --scale: 0.8;
    --rotation: -90deg;
  }
  85% {
    --scale: 0.8;
    --rotation: 0deg;
    animation-timing-function: ease-in-out;
  }
  to {
    --rotation: 0deg;
  }
}
@keyframes reveal-out {
  from {
    --rotation: 0deg;
    animation-timing-function: ease-in-out;
  }
  15% {
    --scale: 0.8;
    --rotation: 0deg;
  }
  85% {
    --scale: 0.8;
    --rotation: 90deg;
    animation-timing-function: ease-in-out;
  }
  to {
    --rotation: 90deg;
  }
}

@keyframes moveIn {
  0% {
    transform: translateY(-100%);
  }
  100% {
    transform: translateY(0);
  }
}

@keyframes moveOut {
  0% {
    transform: translateY(0%);
  }
  100% {
    transform: translateY(100%);
  }
}

@keyframes circleIn {
  0% {
    clip-path: circle(0% at 50% 0%);
  }
  100% {
    clip-path: circle(100% at 50% 0%);
  }
}
